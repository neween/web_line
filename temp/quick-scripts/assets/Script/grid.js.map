{"version":3,"sources":["grid.js"],"names":["cc","Class","extends","Component","properties","_gridId","_x","_y","_dead","_bTouch","m_spriteAtlas","SpriteAtlas","init","type","pos","x","y","anim","getComponent","Animation","Sprite","spriteFrame","getSpriteFrame","node","setPosition","director","getVisibleSize","height","runAction","sequence","delayTime","moveTo","easing","easeBackInOut","drop","posx","posy","changePosition","moveBy","v2","play","playAdditive","stop","getname","onlistenMouse","log","checkSame","checkSametype","checkAreaIn","cell","cellComp","ax","ay","bx","by","getType","isDead","dead"],"mappings":"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","file":"grid.js","sourceRoot":"..\\..\\..\\..\\assets\\Script","sourcesContent":["\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        _gridId:0,\r\n        _x:0,\r\n        _y:0,\r\n        _dead:false,\r\n        _bTouch:false,\r\n        m_spriteAtlas:cc.SpriteAtlas,\r\n    },\r\n\r\n    init:function(type,pos,x,y){\r\n        this._gridId = type;\r\n        this._x = x;\r\n        this._y = y;\r\n        this.anim = this.getComponent(cc.Animation);\r\n        this.getComponent(cc.Sprite).spriteFrame = this.m_spriteAtlas.getSpriteFrame(type + \"_0\");\r\n        this.node.setPosition(pos.x,cc.director.getVisibleSize().height);\r\n        this.node.runAction(cc.sequence(cc.delayTime(x*0.02),cc.moveTo(0.5,pos).easing(cc.easeBackInOut())));\r\n    },\r\n\r\n    drop:function(x,y,posx,posy){//x不传了\r\n        this.changePosition(this._x,y);\r\n        this.node.runAction(cc.sequence(cc.delayTime(0.1),cc.moveBy(0.5,cc.v2(posx,-posy)).easing(cc.easeBackInOut())));\r\n    },\r\n    /**\r\n     * 动画play\r\n     */\r\n    play:function(){\r\n        this.anim.playAdditive('grid_' + this._gridId);\r\n    },\r\n    stop:function(){\r\n        this.anim.stop();\r\n    },\r\n\r\n    getname:function(type){\r\n\r\n    },\r\n\r\n    onlistenMouse:function(){\r\n        cc.log(\"touch enable\");\r\n        this._bTouch = true;\r\n    },\r\n\r\n    checkSame:function(x,y){\r\n        if(x == this._x && y==this._y){\r\n            return true;\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n    checkSametype:function(type){\r\n        return (this._gridId == type)\r\n    },\r\n    checkAreaIn:function(cell){\r\n        var cellComp = cell.getComponent('grid')\r\n\r\n        var ax = cellComp._x;\r\n        var ay = cellComp._y;\r\n\r\n        var bx = this._x;\r\n        var by = this._y;\r\n\r\n        if( ( (ax-1) == bx && (ay+1) == by ) //左上\r\n            || ( (ax) == bx && (ay+1) == by ) //上\r\n            || ( (ax + 1) == bx && (ay+1) == by) //右上\r\n            || ( (ax-1) == bx && (ay) == by) //左\r\n            || ( (ax+1) == bx && (ay) == by) //右\r\n            || ( (ax-1) == bx && (ay-1) == by) //左下\r\n            || ( (ax) == bx && (ay-1) == by) //下\r\n            || ( (ax+ 1) == bx && (ay-1) == by) ) //右下\r\n            {\r\n                return true;\r\n            }\r\n            return false;\r\n    },\r\n\r\n    getType:function(){\r\n        return this._gridId;\r\n    },\r\n\r\n    isDead:function(dead){\r\n        this._dead = dead;\r\n    },\r\n\r\n    changePosition:function(x,y){\r\n        this._x = x;\r\n        this._y = y;\r\n    },\r\n\r\n\r\n});\r\n"]}